# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

commands:
    print_pipeline:
        description: "Print $CIRCLE_WORKFLOW_ID"
        steps:
            - run: echo $CIRCLE_WORKFLOW_ID


# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
    do_sth:
        docker:
            - image: cimg/base:2022.06

        steps:
            - print_pipeline
            - run: cat a_file_that_does_not_exist
            - run:
                command: echo "i just failed" 
                when: on_fail
# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  default:
    jobs:
      - do_sth
